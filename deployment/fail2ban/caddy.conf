# Fail2ban jail for Caddy.
# Bans IPs that generate too many 4xx errors (scanners, probes, etc.)
#
# The logpath must match the Caddy data volume on the host. Run:
#   docker volume inspect deployment_caddy_data
# to find the actual Mountpoint, and update the path below if needed.

[caddy-status]
enabled  = true
filter   = caddy-status
logpath  = /var/lib/docker/volumes/deployment_caddy_data/_data/access.log
maxretry = 15
findtime = 60
bantime  = 3600
action   = iptables-multiport[name=caddy, port="80,443", protocol=tcp]
